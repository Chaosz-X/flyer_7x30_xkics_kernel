From c0e6094545a2e9c34d3a6fb8b18a2ece6922890a Mon Sep 17 00:00:00 2001
From: Giulio Cervera <giulio.cervera@gmail.com>
Date: Tue, 27 Dec 2011 11:00:20 +0100
Subject: [PATCH] Temporary build fix

---
 drivers/video/msm/gpu/kgsl_adreno205_hc/kgsl.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/drivers/video/msm/gpu/kgsl_adreno205_hc/kgsl.c b/drivers/video/msm/gpu/kgsl_adreno205_hc/kgsl.c
index a923b7d..1bf845c 100644
--- a/drivers/video/msm/gpu/kgsl_adreno205_hc/kgsl.c
+++ b/drivers/video/msm/gpu/kgsl_adreno205_hc/kgsl.c
@@ -75,7 +75,10 @@ static int kgsl_add_event(struct kgsl_device *device, u32 ts,
 {
 	struct kgsl_event *event;
 	struct list_head *n;
+/* FIXME
 	unsigned int cur = device->ftbl->readtimestamp(device,
+*/
+	unsigned int cur = device->ftbl.device_cmdstream_readtimestamp(device,
 		KGSL_TIMESTAMP_RETIRED);
 
 	if (cb == NULL)
@@ -709,6 +712,7 @@ static int kgsl_release(struct inode *inodep, struct file *filep)
 	kgsl_memqueue_cleanup(device, private);
 
 	/* Process expired events */
+/* FIXME
 	list_for_each_entry_safe(event, event_tmp, &device->events, list) {
 		if (timestamp_cmp(ts_processed, event->timestamp) < 0)
 			break;
@@ -719,6 +723,7 @@ static int kgsl_release(struct inode *inodep, struct file *filep)
 		list_del(&event->list);
 		kfree(event);
 	}
+*/
 
 	mutex_unlock(&device->mutex);
 	kfree(dev_priv);
@@ -1727,8 +1732,10 @@ static long kgsl_ioctl_cff_user_event(struct kgsl_device_private *dev_priv,
 	int result = 0;
 	struct kgsl_cff_user_event *param = data;
 
+/* FIXME
 	kgsl_cffdump_user_event(param->cff_opcode, param->op1, param->op2,
 			param->op3, param->op4, param->op5);
+*/
 
 	return result;
 }
-- 
1.7.5.4

